var stretched=false;var vote_casted=false;function hidePollForm(){x=document.getElementById("poll_form");x.style.display="none"}function showPollForm(){x=document.getElementById("poll_form");x.style.display="block"}function hidePollResult(){x=document.getElementById("poll_result");x.style.display="none"}function showPollResult(){x=document.getElementById("poll_result");x.style.display="block";if(stretched==false){stretch_graphs()}hidePollForm()}function showAlreadyVotedMessage(){x=document.getElementById("poll_already_voted");x.style.display="block"}function submitPoll(choice_id,poll_id,story_id,section_id){poll_value=getPollValue();if(poll_value!=-1){if(vote_casted==true){alert("Limit 1 vote per user, you have already voted.")}else{url="/survey-bin/tabulate_poll.cgi?mi_pb_cache=1&expire_days=5&path=/&already_voted_error=You have already voted. Limit 1 vote per user.&save=Cast Vote&value=Cast Vote";url=url+"&poll_id="+poll_id;url=url+"&section_id="+section_id;url=url+"&story_id="+story_id;url=url+"&poll_response="+poll_value;x=document.getElementById("communication_iframe");x.src=url;vote_casted=true}}else{alert("Please choose an option to vote for")}}function getPollResults(poll_id,story_id,section_id){url="/survey-bin/tabulate_poll.cgi?mi_pb_cache=1&expire_days=5&path=/&already_voted_error=You have already voted. Limit 1 vote per user.";url=url+"&poll_id="+poll_id;url=url+"&section_id="+section_id;url=url+"&story_id="+story_id;x=document.getElementById("communication_iframe");x.src=url}function getPollValue(){var radios=document.forms.poll_responses.poll_response;for(var i=0;i<radios.length;i++){if(radios[i].checked){return(radios[i].value)}}return -1}function handleResponse(msg,graphical_results){if(vote_casted){stretched=false;hidePollForm();showPollResult()}else{showPollForm();showPollResult()}x=document.getElementById("poll_result");x.innerHTML=graphical_results;x=document.getElementById("communication_iframe");x.src=""}function getPollCookie(name){var dc=document.cookie;var cname=name+"=";var clen=dc.length;var cbegin=0;while(cbegin<clen){var vbegin=cbegin+cname.length;if(dc.substring(cbegin,vbegin)==cname){var vend=dc.indexOf(";",vbegin);if(vend==-1){vend=clen}return unescape(dc.substring(vbegin,vend))}cbegin=dc.indexOf(" ",cbegin)+1;if(cbegin==0){break}}return null}function visibilityCheck(poll_id){var content=getPollCookie("mi_polls");if(content==null){return }sval=content.split(";");num_cookies=sval.length;key=new Array();for(x=0;x<num_cookies/2+1;x++){qval=sval[x].split("=");id=qval[0];poll_submitted=qval[1];key[id]=poll_submitted}if(key[poll_id]==1){hidePollForm();showAlreadyVotedMessage();vote_casted=true}else{showPollForm()}}function stretch_graphs(){stretched=true;x=document.getElementById("poll_result");y=document.getElementById("poll_form");if(x.offsetWidth>0){div_width=x.offsetWidth}else{div_width=y.offsetWidth}multiplier=(div_width*0.9-20)/100;var x=document.getElementsByName("bar_result");for(count=0;count<x.length;count++){pixels=x[count].width;if(pixels>0){x[count].width=pixels*multiplier}}};